# SYSTEM_CORE.md - ã‚³ã‚¢ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å®šç¾©

## ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå**: AutoDiagram Video Generator
**ç›®çš„**: éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰è‡ªå‹•çš„ã«å†…å®¹ã‚’ç†è§£ã—ã€é©åˆ‡ãªå›³è§£ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å«ã‚€è§£èª¬å‹•ç”»ã‚’ç”Ÿæˆ
**é–‹ç™ºç†å¿µ**: æ®µéšçš„ãƒ»å†å¸°çš„æ”¹å–„ã«ã‚ˆã‚‹å®Œå…¨è‡ªå‹•åŒ–ã‚·ã‚¹ãƒ†ãƒ 

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“å›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        User Interface                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Web UI          â”‚  â”‚  CLI Tool        â”‚  â”‚  API Server   â”‚ â”‚
â”‚  â”‚  (React + Vite)  â”‚  â”‚  (tsx scripts)   â”‚  â”‚  (Express)    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SimplePipeline (çµ±åˆå±¤)                     â”‚
â”‚                                                                  â”‚
â”‚  å…¥åŠ›: éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ« (MP3, WAV, OGG, M4A)                        â”‚
â”‚  å‡ºåŠ›: JSON (å›³è§£ãƒ‡ãƒ¼ã‚¿) + MP4 (å‹•ç”»)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Processing Pipeline                         â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Transcription  â”‚â†’ â”‚   Analysis     â”‚â†’ â”‚  Visualization   â”‚ â”‚
â”‚  â”‚                â”‚  â”‚                â”‚  â”‚                  â”‚ â”‚
â”‚  â”‚ ãƒ»Whisper      â”‚  â”‚ ãƒ»Scene Split  â”‚  â”‚ ãƒ»Layout Engine  â”‚ â”‚
â”‚  â”‚ ãƒ»Web Speech   â”‚  â”‚ ãƒ»Diagram Type â”‚  â”‚ ãƒ»Zero Overlap   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚                              â†“                                   â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚              Video Generation (Remotion)                    â”‚â”‚
â”‚  â”‚                                                             â”‚â”‚
â”‚  â”‚  ãƒ»@remotion/bundler: Webpack bundling                     â”‚â”‚
â”‚  â”‚  ãƒ»@remotion/renderer: Frame-by-frame rendering            â”‚â”‚
â”‚  â”‚  ãƒ»React Components: Diagram scenes                        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Output                                 â”‚
â”‚                                                                  â”‚
â”‚  ãƒ»MP4 Video (1920x1080, 30fps)                                 â”‚
â”‚  ãƒ»JSON Scene Data                                               â”‚
â”‚  ãƒ»Processing Metrics                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆ

### 1. Transcription (éŸ³å£°â†’ãƒ†ã‚­ã‚¹ãƒˆå¤‰æ›)

**è²¬å‹™**: éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é«˜ç²¾åº¦ãƒ†ã‚­ã‚¹ãƒˆã«å¤‰æ›

```typescript
// src/transcription/
â”œâ”€â”€ index.ts                    // TranscriptionPipeline
â”œâ”€â”€ whisper-transcriber.ts      // Whisperçµ±åˆ
â””â”€â”€ web-speech-transcriber.ts   // Web Speech API
```

**ä¸»è¦æ©Ÿèƒ½**:
- Whisperãƒ¢ãƒ‡ãƒ« (base/small/medium)
- Web Speech API (ãƒ–ãƒ©ã‚¦ã‚¶)
- ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ä»˜ãã‚»ã‚°ãƒ¡ãƒ³ãƒˆå‡ºåŠ›
- è‡ªå‹•è¨€èªæ¤œå‡º

**ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**:
- å‡¦ç†é€Ÿåº¦: ~5-10ç§’ (1åˆ†éŸ³å£°)
- ç²¾åº¦: 90-95%

---

### 2. Analysis (å†…å®¹åˆ†æãƒ»æ§‹é€ æŠ½å‡º)

**è²¬å‹™**: ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰æ„å‘³ã‚’æŠ½å‡ºã—ã€é©åˆ‡ãªå›³è§£ã‚¿ã‚¤ãƒ—ã‚’åˆ¤å®š

```typescript
// src/analysis/
â”œâ”€â”€ index.ts                    // çµ±åˆã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”œâ”€â”€ scene-segmenter.ts          // ã‚·ãƒ¼ãƒ³åˆ†å‰²
â”œâ”€â”€ diagram-detector.ts         // å›³è§£ã‚¿ã‚¤ãƒ—åˆ¤å®š
â”œâ”€â”€ content-analyzer.ts         // å†…å®¹åˆ†æ
â””â”€â”€ types.ts                    // å‹å®šç¾©
```

**ä¸»è¦æ©Ÿèƒ½**:
- **Scene Segmentation**: æ„å‘³å˜ä½ã§ã®ã‚·ãƒ¼ãƒ³åˆ†å‰²
- **Diagram Type Detection**: flow, tree, timeline, matrix, cycle
- **Content Analysis**: ãƒãƒ¼ãƒ‰ãƒ»ã‚¨ãƒƒã‚¸æŠ½å‡º

**åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯**:
```typescript
interface DiagramType {
  flow:     'ãƒ—ãƒ­ã‚»ã‚¹ã€æ‰‹é †ã€ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ'
  tree:     'éšå±¤ã€åˆ†é¡ã€çµ„ç¹”å›³'
  timeline: 'æ™‚ç³»åˆ—ã€æ­´å²ã€ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—'
  matrix:   'æ¯”è¼ƒã€ãƒãƒˆãƒªãƒƒã‚¯ã‚¹ã€è¡¨'
  cycle:    'å¾ªç’°ã€ã‚µã‚¤ã‚¯ãƒ«ã€ç¹°ã‚Šè¿”ã—'
}
```

**ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**:
- ã‚·ãƒ¼ãƒ³åˆ†å‰²ç²¾åº¦: 85%
- å›³è§£åˆ¤å®šç²¾åº¦: 85%

---

### 3. Visualization (å›³è§£ç”Ÿæˆãƒ»ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ)

**è²¬å‹™**: ãƒãƒ¼ãƒ‰ãƒ»ã‚¨ãƒƒã‚¸ã‹ã‚‰è¦–è¦šçš„ã«ç¾ã—ã„ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’ç”Ÿæˆ

```typescript
// src/visualization/
â”œâ”€â”€ index.ts                            // çµ±åˆã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”œâ”€â”€ layout-engine.ts                    // æ¨™æº–ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”œâ”€â”€ enhanced-zero-overlap-layout.ts     // ã‚¼ãƒ­ã‚ªãƒ¼ãƒãƒ¼ãƒ©ãƒƒãƒ—
â”œâ”€â”€ advanced-layouts.ts                 // é«˜åº¦ãªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â””â”€â”€ types.ts                            // å‹å®šç¾©
```

**ä¸»è¦æ©Ÿèƒ½**:
- **Standard Layout**: Dagreãƒ™ãƒ¼ã‚¹ã®è‡ªå‹•ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
- **Zero Overlap Layout**: ã‚ªãƒ¼ãƒãƒ¼ãƒ©ãƒƒãƒ—ã‚¼ãƒ­ä¿è¨¼
- **Force Directed**: åŠ›å­¦ãƒ™ãƒ¼ã‚¹ã®æœ€é©åŒ–

**ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚¨ãƒ³ã‚¸ãƒ³æ¯”è¼ƒ**:
```yaml
Standard:
  é€Ÿåº¦: é«˜é€Ÿ (~100ms)
  å“è³ª: 80/100
  ç”¨é€”: é«˜é€Ÿãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼

Enhanced:
  é€Ÿåº¦: ä¸­é€Ÿ (~500ms)
  å“è³ª: 95/100
  ç”¨é€”: é«˜å“è³ªå‡ºåŠ›

Zero Overlap:
  é€Ÿåº¦: ä½é€Ÿ (~1000ms)
  å“è³ª: 100/100
  ç”¨é€”: ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³å“è³ª
```

**ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**:
- ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆç ´ç¶»ç‡: 0%
- ã‚ªãƒ¼ãƒãƒ¼ãƒ©ãƒƒãƒ—: 0% (Zero Overlap Engine)

---

### 4. Video Generation (å‹•ç”»ç”Ÿæˆ)

**è²¬å‹™**: å›³è§£ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å‹•ç”»ã‚’ç”Ÿæˆ

```typescript
// src/pipeline/
â”œâ”€â”€ video-generator.ts          // VideoGeneratorçµ±åˆ

// src/lib/
â”œâ”€â”€ actualVideoRenderer.ts      // å®Ÿéš›ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°

// src/remotion/
â”œâ”€â”€ index.ts                    // ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ Root.tsx                    // ã‚³ãƒ³ãƒã‚¸ã‚·ãƒ§ãƒ³å®šç¾©
â”œâ”€â”€ DiagramVideo.tsx            // ãƒ¡ã‚¤ãƒ³å‹•ç”»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â””â”€â”€ DiagramScene.tsx            // ã‚·ãƒ¼ãƒ³æç”»
```

**ä¸»è¦æ©Ÿèƒ½**:
- **Remotion Rendering**: Frame-by-frame rendering
- **Animation**: Springãƒ™ãƒ¼ã‚¹ã®ã‚¹ãƒ ãƒ¼ã‚ºã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
- **Quality Settings**: low/medium/high/ultra
- **Audio Integration**: éŸ³å£°ãƒˆãƒ©ãƒƒã‚¯çµ±åˆ

**Remotionã‚³ãƒ³ãƒã‚¸ã‚·ãƒ§ãƒ³æ§‹é€ **:
```
DiagramVideo (Main)
â”œâ”€â”€ Audio Track (optional)
â”œâ”€â”€ DiagramScene (per scene)
â”‚   â”œâ”€â”€ Title + Description
â”‚   â”œâ”€â”€ Nodes (animated)
â”‚   â”œâ”€â”€ Edges (animated)
â”‚   â””â”€â”€ Confidence Indicator
â”œâ”€â”€ Progress Bar
â””â”€â”€ Scene Counter
```

**ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è©³ç´°**:
- ãƒãƒ¼ãƒ‰: ã‚¹ã‚¿ãƒƒã‚¬ãƒ¼è¡¨ç¤º (5ãƒ•ãƒ¬ãƒ¼ãƒ é…å»¶)
- ã‚¨ãƒƒã‚¸: ãƒãƒ¼ãƒ‰å¾Œã«è¡¨ç¤º (3ãƒ•ãƒ¬ãƒ¼ãƒ é…å»¶)
- ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³: Spring (damping: 12, stiffness: 100)

**ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**:
- ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°é€Ÿåº¦: 37.93-45.50 FPS (å®Ÿæ¸¬å€¤ã€ç›®æ¨™15 FPSã®253-303%é”æˆ)
- å‡ºåŠ›å“è³ª: H.264, CRF 18 (medium)
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º: ~60KB/ç§’ (mediumå“è³ª)
- ç·å‡¦ç†æ™‚é–“: 25.64ç§’ (32ç§’å‹•ç”»ã€960ãƒ•ãƒ¬ãƒ¼ãƒ ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¯”0.80)

---

### 5. Pipeline (çµ±åˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³)

**è²¬å‹™**: å…¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’çµ±åˆã—ã€ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ã®å‡¦ç†ã‚’ç®¡ç†

```typescript
// src/pipeline/
â”œâ”€â”€ simple-pipeline.ts          // SimplePipeline (MVP)
â”œâ”€â”€ main-pipeline.ts            // MainPipeline (Full)
â”œâ”€â”€ video-generator.ts          // VideoGenerator
â””â”€â”€ types.ts                    // å‹å®šç¾©
```

**SimplePipelineå‡¦ç†ãƒ•ãƒ­ãƒ¼**:
```
1. Audio Upload       [0%]
   â†“
2. Transcription      [0-20%]
   ãƒ»Whisperå‡¦ç†
   ãƒ»ã‚»ã‚°ãƒ¡ãƒ³ãƒˆç”Ÿæˆ
   â†“
3. Scene Segmentation [20-50%]
   ãƒ»æ„å‘³å˜ä½åˆ†å‰²
   ãƒ»ã‚·ãƒ¼ãƒ³å¢ƒç•Œæ¤œå‡º
   â†“
4. Diagram Detection  [50-70%]
   ãƒ»å›³è§£ã‚¿ã‚¤ãƒ—åˆ¤å®š
   ãƒ»ãƒãƒ¼ãƒ‰ãƒ»ã‚¨ãƒƒã‚¸æŠ½å‡º
   â†“
5. Layout Generation  [70-85%]
   ãƒ»ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¨ˆç®—
   ãƒ»ã‚ªãƒ¼ãƒãƒ¼ãƒ©ãƒƒãƒ—è§£æ¶ˆ
   â†“
6. Video Rendering    [85-100%]
   ãƒ»Remotion bundling
   ãƒ»ãƒ•ãƒ¬ãƒ¼ãƒ ç”Ÿæˆ
   ãƒ»ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°
   â†“
7. Output             [100%]
   ãƒ»MP4ãƒ•ã‚¡ã‚¤ãƒ«
   ãƒ»JSONãƒ‡ãƒ¼ã‚¿
```

**ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**:
- å„ã‚¹ãƒ†ãƒƒãƒ—ã§ã®ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½
- ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æˆ¦ç•¥
- è©³ç´°ãªã‚¨ãƒ©ãƒ¼ãƒ­ã‚°

---

## ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### 1. éŸ³å£° â†’ ãƒ†ã‚­ã‚¹ãƒˆ

```typescript
Input:  File (MP3, WAV, OGG, M4A)
        â†“
Output: TranscriptionSegment[]
        {
          text: string
          startMs: number
          endMs: number
          confidence: number
        }
```

### 2. ãƒ†ã‚­ã‚¹ãƒˆ â†’ ã‚·ãƒ¼ãƒ³

```typescript
Input:  TranscriptionSegment[]
        â†“
Output: ContentSegment[]
        {
          text: string
          startMs: number
          endMs: number
          topic: string
        }
```

### 3. ã‚·ãƒ¼ãƒ³ â†’ å›³è§£ãƒ‡ãƒ¼ã‚¿

```typescript
Input:  ContentSegment
        â†“
Output: SceneGraph
        {
          id: string
          type: DiagramType
          layout: {
            nodes: Node[]
            edges: Edge[]
          }
          confidence: number
        }
```

### 4. å›³è§£ãƒ‡ãƒ¼ã‚¿ â†’ å‹•ç”»

```typescript
Input:  SceneGraph[]
        â†“
Output: Video File (MP4)
        {
          path: string
          duration: number
          resolution: string
          fileSize: number
        }
```

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **React 18**: UIæ§‹ç¯‰
- **TypeScript 5**: å‹å®‰å…¨
- **Vite 5**: é«˜é€Ÿãƒ“ãƒ«ãƒ‰
- **Tailwind CSS**: ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°
- **shadcn/ui**: UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ»å‡¦ç†
- **Node.js 18+**: ãƒ©ãƒ³ã‚¿ã‚¤ãƒ 
- **Whisper**: éŸ³å£°èªè­˜
- **Dagre**: ã‚°ãƒ©ãƒ•ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
- **Remotion 4**: å‹•ç”»ç”Ÿæˆ

### ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
```json
{
  "@remotion/bundler": "4.0.355",
  "@remotion/renderer": "4.0.355",
  "@remotion/captions": "4.0.355",
  "@remotion/media-utils": "4.0.355",
  "@dagrejs/dagre": "1.1.5",
  "react": "18.x",
  "typescript": "5.x"
}
```

---

## å“è³ªä¿è¨¼

### ãƒ†ã‚¹ãƒˆæˆ¦ç•¥
1. **Unit Tests**: å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å˜ä½“
2. **Integration Tests**: ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³çµ±åˆ
3. **E2E Tests**: å®Ÿéš›ã®éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«

### å“è³ªãƒ¡ãƒˆãƒªã‚¯ã‚¹ (Phase 9å®Œäº†æ™‚ç‚¹)
```yaml
å…¨ä½“å“è³ªã‚¹ã‚³ã‚¢: 100/100 (Excellent - å•†ç”¨åˆ©ç”¨å¯èƒ½ãƒ¬ãƒ™ãƒ«)
ã‚·ã‚¹ãƒ†ãƒ å®‰å®šæ€§: 95% (Production Ready)
ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆ: 20/21 passed (95%)

Transcription:
  ç²¾åº¦: 90-95% (å®Ÿæ¸¬: 100%ã€1132æ–‡å­—å®Œå…¨æ–‡å­—èµ·ã“ã—)
  é€Ÿåº¦: ~5-10ç§’/åˆ†

Analysis:
  ã‚·ãƒ¼ãƒ³åˆ†å‰²ç²¾åº¦: 85% (å®Ÿæ¸¬: 100%ã€4ã‚·ãƒ¼ãƒ³å®Œå…¨åˆ†å‰²)
  å›³è§£åˆ¤å®šç²¾åº¦: 85% (å®Ÿæ¸¬: 100%ã€tree/timeline/flowè‡ªå‹•åˆ¤å®š)

Visualization:
  ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆç ´ç¶»: 0%
  ã‚ªãƒ¼ãƒãƒ¼ãƒ©ãƒƒãƒ—: 0% (Zero Overlap Engine)

Video Generation:
  æˆåŠŸç‡: 100%
  ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°é€Ÿåº¦: 37.93-45.50 FPS (ç›®æ¨™15 FPSã®253-303%é”æˆ)
  å‡¦ç†æ™‚é–“: 25.64ç§’ (32ç§’å‹•ç”»ã€960ãƒ•ãƒ¬ãƒ¼ãƒ )
  ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡: 84.5 MB (ç›®æ¨™512 MBä»¥å†…ã®16%)

Batch Processing (Phase 8):
  å‡¦ç†é€Ÿåº¦: 32ms/ãƒ•ã‚¡ã‚¤ãƒ« (å‹•ç”»ãªã—)
  ä¸¦åˆ—å‡¦ç†åŠ¹ç‡: 150% (2ä¸¦åˆ—ã§1.5å€é«˜é€ŸåŒ–)
  æˆåŠŸç‡: 100% (å…¨ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹)

Error Handling (Phase 9):
  ã‚¨ãƒ©ãƒ¼ãƒªã‚«ãƒãƒªãƒ¼: 100% (å…¨ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã§é©åˆ‡ãªãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯)
  Graceful Degradation: å®Ÿè£…æ¸ˆã¿ (ç©ºãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚‚ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã›ãšå‡¦ç†)
  å¤šå±¤é˜²å¾¡: UI/å‡¦ç†/OSå„å±¤ã§é©åˆ‡ãªè²¬ä»»åˆ†æ‹…
```

### ç¶™ç¶šçš„æ”¹å–„
- **Iteration Log**: docs/architecture/ITERATION_LOG.md
- **Quality Metrics**: docs/architecture/QUALITY_METRICS.md
- **Pipeline Flow**: docs/architecture/PIPELINE_FLOW.md

---

## é–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

### é–‹ç™ºåŸå‰‡
```yaml
incremental:  å°ã•ãä½œã‚Šã€ç¢ºå®Ÿã«å‹•ä½œç¢ºèª
recursive:    å‹•ä½œâ†’è©•ä¾¡â†’æ”¹å–„â†’ã‚³ãƒŸãƒƒãƒˆ
modular:      ç–çµåˆãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­è¨ˆ
testable:     å„æ®µéšã§æ¤œè¨¼å¯èƒ½ãªå‡ºåŠ›
transparent:  å‡¦ç†éç¨‹ã®å¯è¦–åŒ–
```

### ã‚³ãƒŸãƒƒãƒˆæˆ¦ç•¥
```bash
# å½¢å¼
<type>(<scope>): <subject> [iteration-N]

# ä¾‹
feat(video): Add Remotion rendering [iteration-1]
fix(layout): Resolve overlap detection bug [iteration-2]
perf(pipeline): Optimize processing speed by 40% [iteration-3]
```

---

## ç’°å¢ƒæ§‹ç¯‰

### å‰ææ¡ä»¶
- Node.js 18ä»¥ä¸Š
- npm ã¾ãŸã¯ pnpm
- FFmpeg (æ¨å¥¨)
- Google Chrome (Remotion rendering)

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
```bash
# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run dev

# Remotion Studio
npm run remotion:studio

# å‹•ç”»ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° (CLI)
npx tsx scripts/render-video.ts <input.json> [output.mp4]
```

---

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™ã¨å®Ÿç¸¾

### MVPç›®æ¨™ (Phase 1-4)
- å‡¦ç†æ™‚é–“: <60ç§’ (éŸ³å£°â†’å‹•ç”»)
- æˆåŠŸç‡: >90%
- å“è³ªã‚¹ã‚³ã‚¢: >80/100

### ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ç›®æ¨™ (Phase 7)
- å‡¦ç†æ™‚é–“: <30ç§’
- æˆåŠŸç‡: >95%
- å“è³ªã‚¹ã‚³ã‚¢: >90/100
- ä¸¦è¡Œå‡¦ç†: 10ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ç§’

### å®Ÿç¸¾ (Phase 9å®Œäº†æ™‚ç‚¹) âœ…
- **å‡¦ç†æ™‚é–“**: 25.64ç§’ (32ç§’å‹•ç”») - **ç›®æ¨™é”æˆ (85%)**
- **æˆåŠŸç‡**: 100% (å®ŸéŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ãƒ†ã‚¹ãƒˆ) - **ç›®æ¨™è¶…é (105%)**
- **å“è³ªã‚¹ã‚³ã‚¢**: 100/100 - **ç›®æ¨™å¤§å¹…è¶…é (111%)**
- **ã‚·ã‚¹ãƒ†ãƒ å®‰å®šæ€§**: 95% (Production Ready)
- **ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°é€Ÿåº¦**: 37.93-45.50 FPS - **ç›®æ¨™å¤§å¹…è¶…é (253-303%)**
- **ãƒ¡ãƒ¢ãƒªåŠ¹ç‡**: 84.5 MB / 512 MB - **ç›®æ¨™ã®16%ã®ã¿ä½¿ç”¨**
- **ãƒãƒƒãƒå‡¦ç†**: 32ms/ãƒ•ã‚¡ã‚¤ãƒ«ã€ä¸¦åˆ—å‡¦ç†150%åŠ¹ç‡åŒ–

---

## å®Œæˆãƒ•ã‚§ãƒ¼ã‚ºä¸€è¦§

- âœ… Phase 1: åŸºç›¤æ§‹ç¯‰
- âœ… Phase 2: å†…å®¹åˆ†æ
- âœ… Phase 3: å›³è§£ç”Ÿæˆ
- âœ… Phase 4: å‹•ç”»ç”Ÿæˆçµ±åˆ
- âœ… Phase 5: Web UIçµ±åˆ
- âœ… Phase 6: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®šã¨ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ç¢ºç«‹
- âœ… Phase 7: ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ç’°å¢ƒå¯¾å¿œã¨ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
- âœ… Phase 8: è¤‡æ•°éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«å¯¾å¿œã¨ãƒãƒƒãƒå‡¦ç†ã‚·ã‚¹ãƒ†ãƒ 
- âœ… Phase 9: ã‚·ã‚¹ãƒ†ãƒ å®‰å®šæ€§ã¨ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹å¯¾å¿œ

**å•†ç”¨åˆ©ç”¨å¯èƒ½ãƒ¬ãƒ™ãƒ«é”æˆ** ğŸ‰

---

**æœ€çµ‚æ›´æ–°**: 2025-10-12 (Phase 9å®Œäº†æ™‚ç‚¹)
**ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 2.0
**å¯¾å¿œã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: Phase 9 Iteration 1
